!function(t){"function"==typeof define&&define.amd?define("settings",t):t()}((function(){"use strict";jQuery((function(t){var e,n=window.wpshop_settings_globals||{storage_key:"quizle-settings-tab"};function o(t){t.parent(".js-wpshop-settings-tabs").find("li").removeClass("active"),t.addClass("active")}function i(e){t(".js-wpshop-settings-tab").hide().promise().done((function(){e.fadeIn(250,(function(){document.dispatchEvent(new CustomEvent("wpshop_settings:show_tab_content",{detail:{tab:e.attr("id")}}))}))}))}function s(){return"undefined"!=typeof localStorage||(console.warn("Unable to use local storage in current browser"),!1)}!function(){var e=function(e){try{var n=t('.js-wpshop-settings-tabs li[data-tab="'+e+'"]'),s=t(e);if(n.length&&s.length)return o(n),i(s),!0}catch(t){console.warn(t)}return!1};if(window.location.hash.length&&e(window.location.hash))return;var a=function(t){if(s())return localStorage.getItem(t);return null}(n.storage_key);a&&e(a)}(),t(".js-wpshop-settings-color-picker").wpColorPicker({clear:function(e){t(e.target).data("custom_trigger_change")||t(e.target).trigger("change"),document.dispatchEvent(new CustomEvent("wpshop_settings_trigger_update_preview",{detail:{e:e}}))},change:function(n,o){clearTimeout(e),e=setTimeout((function(){t(n.target).trigger("change")}),200),document.dispatchEvent(new CustomEvent("wpshop_settings_color_picker_change",{detail:{e:n,ui:o}}))}}),t(document).on("click",".js-wpshop-settings-tabs li",(function(e){var a=t(e.currentTarget);if(!a.hasClass("active")){var c,r,u=a.data("tab");o(a),i(t(u)),c=n.storage_key,r=u,s()&&localStorage.setItem(c,r)}})),t(document).on("click",".js-wpshop-settings-welcome-close",(function(e){t(e.target).parent().fadeOut(150),t.ajax(ajaxurl,{data:{action:"wpshop_settings_hide_welcome"}})})),t(document).on("click",".js-wpshop-settings-remove-license",(function(e){e.preventDefault(),confirm(t(e.target).data("message"))&&t.ajax(ajaxurl,{data:{action:"wpshop_settings_remove_license"}}).done((function(){window.location.reload()}))})),t(document).on("change","input,select,textarea",(function(){var e=t(".js-wpshop-settings-container-save");e.data("handled_sticky")||(!function(t,e,n){if(!t.length)return;var o=t[0].getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight;o.top>i?e():o.bottom>i&&n()}(e.find("button"),(function(){e.hide().css("position","sticky").slideDown(200)}),(function(){e.css("position","sticky")})),e.css("position","sticky"),e.data("handled_sticky",1))}))}))}));