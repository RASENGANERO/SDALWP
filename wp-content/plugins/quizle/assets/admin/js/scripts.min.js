!function(e){"function"==typeof define&&define.amd?define("scripts",e):e()}((function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
n=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,r=Object.create(a.prototype),o=new b(i||[]);return r._invoke=function(e,t,n){var i="suspendedStart";return function(a,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw r;return k()}for(n.method=a,n.arg=r;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=c(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),r}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function p(){}function f(){}function h(){}var v={};s(v,r,(function(){return this}));var m=Object.getPrototypeOf,q=m&&m(m(x([])));q&&q!==t&&i.call(q,r)&&(v=q);var z=h.prototype=p.prototype=Object.create(v);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(a,r,o,u){var s=c(e[a],e,r);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;this._invoke=function(e,i){function r(){return new t((function(t,a){n(e,i,t,a)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=h,s(z,"constructor",h),s(h,"constructor",f),f.displayName=s(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,u,"GeneratorFunction")),e.prototype=Object.create(z),e},e.awrap=function(e){return{__await:e}},g(j.prototype),s(j.prototype,o,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,i,a,r){void 0===r&&(r=Promise);var o=new j(l(t,n,i,a),r);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(z),s(z,u,"Generator"),s(z,r,(function(){return this})),s(z,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=x,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var u=i.call(r,"catchLoc"),s=i.call(r,"finallyLoc");if(u&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(u){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,i,a,r,o){try{var u=e[r](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(i,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function u(e){i(o,a,r,u,s,"next",e)}function s(e){i(o,a,r,u,s,"throw",e)}u(void 0)}))}}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n){var i=wp.media.frames.file_frame=wp.media({title:e,button:{text:t},library:{type:"image"},multiple:!1});return i.on("select",n.bind(i)),i}function s(e,t,n){var i=wp.media.frames.file_frame=wp.media({title:e,button:{text:t},library:{type:["video","image"]},multiple:!1});return i.on("select",n.bind(i)),i}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.is(":checkbox"))return e.prop("checked")?1:0;if(e.data("is_json")&&e.val()){try{return JSON.parse(e.val())}catch(e){console.error(e)}return t}return e.val()}function c(e){return void 0!==e.data("name")?e.data("name"):void 0!==e.attr("data-name")?e.attr("data-name"):void 0}var d=window.quizleScriptOptions||{};jQuery((function(e){var t;e(document).on("click",".js-quizle-media-browse",(function(t){t.preventDefault();var n=e(this),i=n.parents(".js-quizle-media-uploader"),a=i.find(".js-quizle-media-preview");s(i.data("uploader_title"),i.data("uploader_button_text"),(function(){var t=this.state().get("selection").first().toJSON();if(i.find(".js-quizle-media-value").val(JSON.stringify({id:t.id,url:t.url,type:t.type,title:t.title,position:l(i.find(".js-quizle-media-position"))})),document.dispatchEvent(new CustomEvent("quizle_media_upload",{detail:{attachment:t,url:t.url,$container:i}})),a.length){var r=t.url;"video"===t.type&&(r=d.videoIcon),a.show(),e("<img>").attr("src",r).addClass("js-quizle-media-preview-icon quizle-media-upload__preview-"+t.type).appendTo(a),"video"===t.type&&e("<span>").addClass("js-quizle-media-preview-text quizle-media-upload__preview-text").text(t.title).appendTo(a)}n.hide(),i.find(".js-quizle-media-remove").show()})).open()})),e(document).on("click",".js-quizle-media-remove",(function(t){t.preventDefault();var n=e(this),i=n.parents(".js-quizle-media-uploader");n.hide(),i.find(".js-quizle-media-browse").show(),i.find(".js-quizle-media-preview-icon").remove(),i.find(".js-quizle-media-preview-text").remove(),i.find(".js-quizle-media-value").val(""),i.find(".js-quizle-media-preview").hide(150),document.dispatchEvent(new CustomEvent("quizle_media_remove",{detail:{$container:i}}))})),e(document).on("click",".js-quizle-media-preview",(function(t){t.preventDefault();var n=e(this).parents(".js-quizle-media-uploader"),i=n.find(".js-quizle-media-preview");s(n.data("uploader_title"),n.data("uploader_button_text"),(function(){var t=this.state().get("selection").first().toJSON();if(n.find(".js-quizle-media-value").val(JSON.stringify({id:t.id,url:t.url,type:t.type,title:t.title,position:l(n.find(".js-quizle-media-position"))})),document.dispatchEvent(new CustomEvent("quizle_media_upload",{detail:{attachment:t,url:t.url,$container:n}})),i.length){i.find(".js-quizle-media-preview-icon").remove(),i.find(".js-quizle-media-preview-text").remove();var a=t.url;"video"===t.type&&(a=d.videoIcon),i.show(),e("<img>").attr("src",a).addClass("js-quizle-media-preview-icon quizle-media-upload__preview"+t.type).appendTo(i),"video"===t.type&&e("<span>").addClass("js-quizle-media-preview-text quizle-media-upload__preview-text").text(t.title).appendTo(i)}})).open()})),e(document).on("keyup",".js-quizle-media-host-link",(function(n){clearTimeout(t);var i=e(n.currentTarget),a=i.parents(".js-quizle-media-uploader");t=setTimeout((function(){var e=i.val()?i.val().trim():null;e?(a.find(".js-quizle-media-upload-wrap").hide(),a.find(".js-quizle-media-value").val(JSON.stringify({id:null,url:e,type:"link",title:null,position:l(a.find(".js-quizle-media-position"))})),document.dispatchEvent(new CustomEvent("quizle_media_upload",{detail:{attachment:null,url:e,$container:a}}))):(document.dispatchEvent(new CustomEvent("quizle_media_remove",{detail:{$container:a}})),a.find(".js-quizle-media-value").val(""),a.find(".js-quizle-media-upload-wrap").show())}),250)})),e(document).on("change",".js-quizle-media-position",(function(t){var n=e(this),i=n.parents(".js-quizle-media-uploader"),a=i.find(".js-quizle-media-value"),r=l(a,{});r.position=l(n),a.val(JSON.stringify(r)),document.dispatchEvent(new CustomEvent("quizle_media_upload",{detail:{attachment:r.attachment,url:r.url,$container:i}}))})),e(document).on("click",".js-quizle-image-browse",(function(t){t.preventDefault();var n=e(this),i=n.parents(".js-quizle-image-uploader"),a=i.find(".js-quizle-image-preview");u(i.data("uploader_title"),i.data("uploader_button_text"),(function(){var t=this.state().get("selection").first().toJSON();document.dispatchEvent(new CustomEvent("quizle_image_upload",{detail:{attachment:t,url:t.url,$container:i}})),i.find(".js-quizle-image-url").val(t.url),a.length&&(a.show(),e("<img>").attr("src",t.url).addClass().appendTo(a)),n.hide(),i.find(".js-quizle-image-remove").show()})).open()})),e(document).on("click",".js-quizle-image-remove",(function(t){t.preventDefault();var n=e(this),i=n.parents(".js-quizle-image-uploader");i.find(".js-quizle-image-browse").show(),i.find("img").remove(),i.find(".js-quizle-image-url").val(""),n.hide(),i.find(".js-quizle-image-preview").hide(150),document.dispatchEvent(new CustomEvent("quizle_image_remove",{detail:{$container:i}}))})),e(document).on("click",".js-quizle-image-preview",(function(t){t.preventDefault();var n=e(this).parents(".js-quizle-image-uploader");u(n.data("uploader_title"),n.data("uploader_button_text"),(function(){var e=this.state().get("selection").first().toJSON();document.dispatchEvent(new CustomEvent("quizle_image_upload",{detail:{url:e.url,$container:n}})),n.find(".js-quizle-image-url").val(e.url),n.find("img").attr("src",e.url)})).open()}))}));var p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jQeury=t,this.$container=n,this._timeouts={},this._messages={}}var t,i,o,u,s,l,c,d,p,f,h,v;return t=e,i=[{key:"warning",value:(v=a(n().mark((function e(t){var i,a=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:0,e.abrupt("return",this.add(t,"warning",i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"removeWarning",value:(h=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.remove(t,"warning"));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"notice",value:(f=a(n().mark((function e(t){var i,a=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:0,e.abrupt("return",this.add(t,"notice",i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"removeNotice",value:(p=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.remove(t,"notice"));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"error",value:(d=a(n().mark((function e(t){var i,a=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:0,e.abrupt("return",this.add(t,"error",i));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"removeError",value:(c=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.remove(t,"error"));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"add",value:(l=a(n().mark((function e(t){var i,a,r,o,u,s=this,l=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=l.length>1&&void 0!==l[1]?l[1]:"warning",a=l.length>2&&void 0!==l[2]?l[2]:0,r=this.jQeury,o=r('<div class="quizle-message quizle-message--'+i+'">').text(t),u=[this.stringHash(t),this.stringHash(i)].join(":"),void 0!==this._messages[u]){e.next=13;break}if(this._messages[u]=!0,o.data("hash",u),o.hide(),this.$container.append(o),o.slideDown(150),!(a>0)){e.next=13;break}return e.abrupt("return",new Promise((function(e){clearTimeout(s._timeouts[u]),s._timeouts[u]=setTimeout((function(){s.removeByHash(u).then((function(){return e(u)}))}),a)})));case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"remove",value:(s=a(n().mark((function e(t,i){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[this.stringHash(t),this.stringHash(i)].join(":"),e.abrupt("return",this.removeByHash(a));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"removeByHash",value:(u=a(n().mark((function e(t){var i,a,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.jQeury,a=[],delete this._messages[t],this.$container.find(".quizle-message").filter((function(e,n){return t===i(n).data("hash")})).each((function(e,t){a.push(new Promise((function(e){i(t).slideUp(150,(function(t){i(t).remove(),e(r)}))})))})),!a.length){e.next=6;break}return e.abrupt("return",Promise.all(a));case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"stringHash",value:function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}}],i&&r(t.prototype,i),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return JSON.parse(e)}catch(e){console.error(e)}return t}function h(){var e={},t={},n={},i={},a=function(e){for(var t=0;t<1e5;t++){var n=Math.random().toString(36).substring(2,10);if(void 0===e[n])return e[n]=n,n}throw"Unable to generate unique id"};return{generateQuestionId:function(){return a(e)},putQuestionId:function(t){e[t]=t},removeQuestionId:function(t){delete e[t]},generateAnswerId:function(){return a(t)},putAnswerId:function(e){t[e]=e},removeAnswerId:function(e){delete t[e]},generateConditionGroupsId:function(){return a(n)},putConditionGroupsId:function(e){n[e]=e},removeConditionGroupsId:function(e){delete n[e]},generateConditionId:function(){return a(i)},putConditionId:function(e){i[e]=i},removeConditionId:function(e){delete i[e]}}}function v(e){var n=window.localStorage,i=t({hideQuestions:{},hideResults:{},boxes:{}},f(n.getItem(e))),a=function(t,a,r,o){o?i[t]["".concat(a,".").concat(r)]=1:delete i[t]["".concat(a,".").concat(r)],n.setItem(e,JSON.stringify(i))},r=function(e,t,n){return void 0!==i[e]["".concat(t,".").concat(n)]&&i[e]["".concat(t,".").concat(n)]};return{setItem:function(t,a){i.boxes[t]=parseInt(a),n.setItem(e,JSON.stringify(i))},getItem:function(e){return void 0!==i.boxes[e]?i.boxes[e]:null},removeItem:function(t){delete i.boxes[t],n.setItem(e,JSON.stringify(i))},hideQuestion:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a("hideQuestions",e,t,n),this},doHideQuestion:function(e,t){return r("hideQuestions",e,t)},hideResult:function(e,t,n){return a("hideResults",e,t,n),this},doHideResult:function(e,t){return r("hideResults",e,t)}}}jQuery((function(e){var n,i,a,r="contacts",o="variable",u="test",s=quizle_i18n||{},d=window.quizleMetaboxOptions||{},m=!1,q=!1,z=wp.template,g=function(e){var n=z("quizle-question")(t({can_add_conditions:q,can_add_custom_answer:Array.isArray(e.answers)&&e.answers.filter((function(e){return"custom"===e.type})).length},e));return q=!0,n},j=z("quizle-answer"),w=z("quizle-result"),y=z("quizle-image-uploader"),_=z("quizle-media-uploader"),b=function(e){var n=t({id:D.generateConditionGroupsId()},e);return D.putConditionGroupsId(n.id),z("quizle-conditions-group")(n)},x=function(e){var n=t({id:D.generateConditionId()},e);return D.putConditionId(n.id),z("quizle-condition-item")(n)},k=e(".js-questions-container"),O=e(".js-results-container"),T=e('input[name="quizle-type"]'),E=e('input[name="quizle-questions"]'),I=e('input[name="quizle-results"]'),C=0,N=[],S=new v("quizle-state"),D=new h,L=new p(e,e(".js-quizle-messages")),P={requireResultsOrContacts:s.requireResultsOrContacts};k.on("change","input, textarea, select",(function(t){e(t.target).data("prevent_observe_change")||me()})),k.on("keyup","input, textarea",(function(t){e(t.target).data("prevent_observe_change")||me()})),O.on("change","input, textarea, select",qe),O.on("keyup","input, textarea",qe),B(T.val()),F(),e(document).on("change",'input[type="checkbox"][name="result-enabled"], input[type="checkbox"][name="contact-enabled"]',(function(e){F()}));var A=!1;if(e("#post").submit((function(){A=!1})),e(document).on("change","#post input, #post select, #post textarea",(function(t){var n,i;A=!0,n=t.currentTarget,(i=e(n)).is(":checkbox")&&e('input[type="checkbox"][data-depends="'+i.attr("name")+'"]').each((function(t,n){var a=e(n),r=!!a.data("depends-value");i.prop("checked")?(a.prop("checked",a.data("checked")),a.attr("disabled",!1)):(a.data("checked",a.prop("checked")),a.prop("checked",r),a.attr("disabled",!0))}))})),e(document).ready((function(){window.onbeforeunload=function(e){if(A){var t="You have not saved your changes.";return(e=e||window.event).preventDefault(),e&&(e.returnValue=t),t}}})),I.val()){var Q=f(I.val(),[]);Q.forEach((function(t){var n=pe(de(e(w(t)),t));n.appendTo(O),S.doHideResult(e("#post_ID").val(),t.id)&&n.find(".quizle-result__body").hide(),N.push({label:t.title,value:t.id})})),C=U(Q)}if(E.val()){var J=f(E.val(),[]);J.forEach((function(n){D.putQuestionId(n.question_id);var i=se(fe(e(g(n))),n.media),a=i.find(".js-quizle-answers-container");k.append(i),S.doHideQuestion(e("#post_ID").val(),n.question_id)&&i.find(".quizle-question__body").hide(),ee(n.type)?n.answers.forEach((function(t){D.putAnswerId(t.answer_id);var n=e(j(t));n=ce(n=le(n,i.find('select[data-name="type"]').val())),a.append(n),Y(n.find(".js-quizle-answer-score-select"),Z(K())?t.value:void 0),X(K())&&n.find(".js-quizle-answer-score-number").val(t.value)})):oe(i,!1),ae(i,te(n.type)),re(i,ne(n.type)),setTimeout((function(){!function(n,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(E.val(),[]);if(!Array.isArray(i.conditions))return;i.conditions.forEach((function(r){if(r.conditions.length){var o=(d.conditions.types.filter((function(e){return e.value===r.type}))[0]||{}).text,u=(d.conditions.relations.filter((function(e){return e.value===r.relation}))[0]||{}).text,s=e(b(t({type_text:o,relation_text:u},r))),l=s.find(".quizle-question-conditions__body");s.appendTo(n.find(".quizle-question-conditions"));var c=1;r.conditions.forEach((function(r){G(!0),n.addClass("has-conditions");var o=e(x(t({idx:c++,questions:$(i.question_id,a,r.disabled)},r)));o.appendTo(l);var u=o.find(".js-quizle-condition-item-question");u.val(r.target),H(u,r)}))}}))}(i,n,J)}),10)}))}function G(t){if(m!==t){m=t,e('input[name="quizle-has-conditions"]').val(t?1:0);var n=e('input[type="checkbox"][name="random-questions"]');void 0===n.data("_stashed_value")&&n.data("_stashed_value",l(n)),m?n.prop("checked",!1).prop("disabled",!0):n.prop("checked",n.data("_stashed_value")).prop("disabled",!1);var i=e("#view-type");void 0===i.data("_stashed_value")&&i.data("_stashed_value",i.val()),m?i.val("slides").prop("disabled",!0):i.val(i.data("_stashed_value")).prop("disabled",!1)}}function $(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(E.val(),[]),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],a=0;a<t.length&&(n||t[a].question_id!==e);a++)i.push({question_id:t[a].question_id,title:t[a].title});return i}function H(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:[],compareOptions:{partial:1,caseSensitive:0}},i=t.parents(".js-quizle-condition-item"),a=t.val();if(i.find(".js-quizle-condition-item-options").remove(),a){var r=e('[data-name="question_id"][value="'+a+'"]').parents(".js-quizle-question-item");if(r.length)if(ee(r.find('select[data-name="type"]').val())){var o=[];r.find(".js-quizle-answer-item").each((function(){var t=e(this),n="custom"===t.find(".js-quizle-answer-type").val()?t.find(".js-quizle-answer-custom-text").html():t.find('input[data-name="name"]').val();o.push({name:n,value:t.find(".js-quizle-answer-id").val()})}));for(var u=e('<select data-name="value" multiple class="js-quizle-condition-item-answers">'),s=0;s<o.length;s++){var l=e("<option>").attr("value",o[s].value).text(o[s].name);n.value.includes(o[s].value)&&l.prop("selected",!0),l.appendTo(u)}i.find(".js-quizle-condition-item-answers").replaceWith(u),i.find('input[data-name="compare"]').val("in")}else{var c=e('<input data-name="value" type="text" class="js-quizle-condition-item-answers">');c.val(n.value[0]),i.find(".js-quizle-condition-item-answers").replaceWith(c);var p=e('<label class="js-quizle-condition-item-options"><input type="checkbox" data-name="compare-option-partial" value="1"> '+d.conditions.labelPartial+"</label>");p.find("input").prop("checked",n.compareOptions&&n.compareOptions.partial),p.insertAfter(c);var f=e('<label class="js-quizle-condition-item-options"><input type="checkbox" data-name="compare-option-caseSensitive" value="1"> '+d.conditions.labelCaseSensitive+"</label>");f.find("input").prop("checked",n.compareOptions&&n.compareOptions.caseSensitive),f.insertAfter(p),i.find('input[data-name="compare"]').val("like")}}else i.find(".js-quizle-condition-item-answers").replaceWith(e('<span class="js-quizle-condition-item-answers">(select a question)</span>'))}V(),e(".quizle-box").find(".js-color-picker").wpColorPicker(),e(document).on("click",".js-quizle-type-item",(function(t){if(!e(t.target).hasClass("js-quizle-type-item--doc-link")){t.preventDefault();var n=e(this);e(".js-quizle-type-item").removeClass("checked"),B(n.data("type"),T.val()),T.val(n.data("type")),n.addClass("checked"),e(".js-quizle-answers-container .js-quizle-answer-item").each((function(){ce(e(this),n.data("type"),!0)})),e(".js-results-container .js-quizle-result-item").each((function(){pe(e(this))})),e(".js-quizle-question-item").each((function(){ae(e(this))}))}})),e(".js-quizle-box-header-action-expand").each((function(){var t=e(this).parents(".quizle-box").find(".quizle-box__body"),n=S.getItem(t.data("identity"));null!==n&&n?(t.show(),t.data("show_state",1)):(t.hide(),t.data("show_state",0))})),e(document).on("click",".js-quizle-box-header-action-expand",(function(){var t=e(this).parents(".quizle-box").find(".quizle-box__body");parseInt(t.data("show_state"))?(t.slideUp(150),t.data("show_state",0)):(t.slideDown(150),t.data("show_state",1)),S.setItem(t.data("identity"),t.data("show_state"))})),e(document).on("click",".js-add-quizle-question",(function(t){t.preventDefault();var n=e(g({type:"check",question_id:D.generateQuestionId()}));oe(n=se(n=he(fe(n),"quizle-question--highlight"))),ae(n),re(n),e(".js-questions-container").append(n)})),e(document).on("click",".quizle-question-action--copy",(function(){var t=e(this).parents(".js-quizle-question-item"),n=t.clone();he(n.insertAfter(t),"quizle-question--highlight"),n.find(".js-quizle-question-id").val(D.generateQuestionId()),n.find(".js-quizle-answer-id").each((function(){e(this).val(D.generateAnswerId())})),n.find(".js-quizle-question-conditions-id").each((function(){e(this).val(D.generateConditionGroupsId())})),n.find(".js-quizle-condition-item-id").each((function(){e(this).val(D.generateConditionId())})),ze()})),e(document).on("click",".quizle-question-action--delete",(function(){if(confirm(e(this).data("confirm"))){var t=e(this).parents(".js-quizle-question-item");D.removeQuestionId(t.find(".js-quizle-question-id").val()),t.remove(),me(),V()}})),e(document).on("click",".js-quizle-question-action-expand",(function(){var t=e(this).parents(".js-quizle-question-item");t.find(".quizle-question__body").slideToggle(150,(function(){S.hideQuestion(e("#post_ID").val(),t.find(".js-quizle-question-id").val(),!e(this).is(":visible"))}))})),e(document).on("click",".js-quizle-box-header-action-expand-all-questions",(function(t){t.preventDefault();var n=e(t.currentTarget);n.parents(".quizle-box").find(".quizle-question__body").slideUp(150,(function(){var t=e(this).parents(".js-quizle-question-item");S.hideQuestion(e("#post_ID").val(),t.find(".js-quizle-question-id").val(),!0)})),n.blur()})),e(document).on("keyup",".js-quizle-question-name",(function(){var t=e(this);ve((function(){t.parents(".js-quizle-question-item").find(".quizle-question-header__title-additional").text(t.val())}))})),e(document).on("click",".js-add-quizle-answer, .js-add-quizle-custom-answer",(function(t){t.preventDefault();var n=e(this),i=n.parents(".js-quizle-question-item"),a=n.hasClass("js-add-quizle-custom-answer"),r=e(j({answer_id:D.generateAnswerId(),type:a?"custom":"general"}));r=ce(r=le(r=he(r,"quizle-answer--highlight"),i.find('select[data-name="type"]').val())),a&&n.hide(),Y(r.find(".js-quizle-answer-score-select")),n.parents(".js-quizle-question-item").find(".js-quizle-answers-container").append(r),W(i,"changed_answer")})),e(document).on("click",".quizle-answer-action--delete",(function(t){if(confirm(e(this).data("confirm"))){var n=e(this),i=n.parents(".js-quizle-answer-item"),a=n.parents(".js-quizle-question-item");D.removeAnswerId(i.find(".js-quizle-answer-id").val()),i.remove(),ze(),V(),W(a,"changed_answer"),"custom"===i.find(".js-quizle-answer-type").val()&&a.find(".js-add-quizle-custom-answer").show()}})),e(document).on("change",'.js-quizle-question-item select[data-name="type"]',(function(){var t=e(this),n=t.val(),i=t.parents(".js-quizle-question-item");oe(i,ee(n)),ae(i,te(n)),re(i,ne(n)),i.find(".js-quizle-answer-item").each((function(){var t=e(this).find(".js-quizle-answer-image");ue(n)?t.children().length||e(y({name:"image",url:t.attr("data-image")})).appendTo(t):t.children().slideUp(50,(function(){e(this).remove()}))}))})),e(document).on("quizle_image_upload",(function(e){e.detail.$container.parent(".js-quizle-answer-image").attr("data-image",e.detail.url),me(),qe()})),e(document).on("quizle_media_upload",(function(e){me()})),e(document).on("quizle_image_remove",(function(e){e.detail.$container.parent(".js-quizle-answer-image").attr("data-image",""),me(),qe()})),e(document).on("quizle_media_remove",(function(e){me()})),e(document).on("keyup",".js-quizle-result-title",(function(){var t=e(this);ve((function(){t.parents(".js-quizle-result-item").find(".quizle-result-header__title-additional").text(t.val())}))})),e(document).on("click",".js-quizle-result-action-expand",(function(){e(this).parents(".quizle-result").find(".quizle-result__body").slideToggle(150,(function(){var t=e(this);S.hideResult(e("#post_ID").val(),t.parents(".js-quizle-result-item").find('input[data-name="id"]').val(),!t.is(":visible"))}))})),e(document).on("click",".js-quizle-box-header-action-expand-all-results",(function(t){t.preventDefault();var n=e(t.currentTarget);n.parents(".quizle-box").find(".quizle-result__body").slideUp(150,(function(){S.hideResult(e("#post_ID").val(),e(this).parents(".js-quizle-result-item").find('input[data-name="id"]').val(),!0)})),n.blur()})),e(document).on("click",".quizle-result-action--copy",(function(){var t=e(this).parents(".quizle-result");he(t.clone().insertAfter(t),"quizle-result--highlight")})),e(document).on("click",".quizle-result-action--delete",(function(){confirm(e(this).data("confirm"))&&(e(this).parents(".js-quizle-result-item").remove(),je())})),e(document).on("click",".js-add-quizle-result",(function(){pe(de(e(w({id:C+1})))).appendTo(O),e('input[type="checkbox"][name="result-enabled"]').prop("checked",!0)})),e(document).on("change",".js-quizle-answer-score-number, .js-quizle-answer-score-select",(function(){var t=e(this);t.parents(".js-quizle-answer-item").find('input[data-name="value"]').val(t.val()),t.hasClass("js-quizle-answer-score-number")&&ie(K())&&V()})),e(document).on("change",".js-quizle-is-multiple-checkbox input, .js-quizle-is-required-checkbox input",V),e(document).on("click",".js-quizle-question--add-conditions",(function(t){t.preventDefault();var n=e(t.currentTarget);if(!n.hasClass("disabled")){n.parents(".js-quizle-question-item").addClass("has-conditions");var i=d.conditions.types[0]||{},a=i.text,r=i.value,o=d.conditions.relations[0]||{},u=o.text,s=o.value;e(b({type_text:a,type:r,relation_text:u,relation:s})).hide().appendTo(n.parents(".quizle-question-conditions")).fadeIn(150)}})),e(document).on("click",".js-quizle-question--remove-conditions",(function(t){t.preventDefault();var n=e(t.currentTarget),i=n.parents(".js-quizle-question-item");n.parents(".quizle-question-conditions__container").fadeOut(150,(function(){e(this).remove(),i.find(".js-quizle-question-conditions").length||i.removeClass("has-conditions"),ze()}))})),e(document).on("click",".js-quizle-question--add-condition-item",(function(t){t.preventDefault();var n=e(t.currentTarget);if(!n.hasClass("disabled")){var i=n.parents(".js-quizle-question-conditions"),a=0;i.find(".js-quizle-condition-item-idx").each((function(){var t=parseInt(e(this).text());!isNaN(t)&&t>a&&(a=t)})),a++,e(x({idx:a,compare:"in",questions:$(n.parents(".js-quizle-question-item").find(".js-quizle-question-id").val())})).hide().appendTo(i.find(".quizle-question-conditions__body")).fadeIn(150)}})),e(document).on("change",".js-quizle-condition-item-question",(function(t){H(e(t.currentTarget))})),e(document).on("click",".js-quizle-question--remove-condition-item",(function(t){t.preventDefault();var n=e(t.currentTarget),i=n.parents(".js-quizle-question-conditions");n.parents(".js-quizle-condition-item").fadeOut(159,(function(){e(this).remove(),ze();var t=1;i.find(".js-quizle-condition-item-idx").each((function(){e(this).text(t++)}))}))})),e(document).on("click",".js-quizle-question-conditions-type",(function(t){var n=e(t.currentTarget),i=n.parents(".js-quizle-question-conditions").find('.js-quizle-question-conditions-inputs input[data-name="type"]'),a=i.val(),r=d.conditions.types.filter((function(e){return e.value!==a}))[0];r&&(i.val(r.value),n.text(r.text),ze())})),e(document).on("click",".js-quizle-question-conditions-relation",(function(t){var n=e(t.currentTarget),i=n.parents(".js-quizle-question-conditions").find('.js-quizle-question-conditions-inputs input[data-name="relation"]'),a=i.val(),r=d.conditions.relations.filter((function(e){return e.value!==a}))[0];r&&(i.val(r.value),n.text(r.text),ze())}));var R,M=null;function W(n,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.find(".js-quizle-question-id").val(),o=e(".js-quizle-question-item.has-conditions");if(o.length)switch(i){case"changed_question_type":var u=a.curValue,s=a.prevValue;if(ee(u)===ee(s))return;o.each((function(){e(this).find(".js-quizle-condition-item-question").each((function(){var t=e(this);if(t.val()===r){var n=t.parents(".js-quizle-condition-item");H(n.find(".js-quizle-condition-item-question")),n.find(".js-quizle-condition-item-changed").show()}}))})),ze();break;case"changed_answer":case"changed_question":var l=a.markChanged,c=void 0===l?1:l,d=function(t){var n=[];return t.find(".js-quizle-condition-item-question option").each((function(){var t=e(this).attr("value");if(t){var i=e('input[data-name="question_id"][value="'+t+'"]').parents(".js-quizle-question-item");n.push({question_id:t,title:i.find(".js-quizle-question-name").val()})}})),n};o.each((function(){e(this).find(".js-quizle-condition-item-question").each((function(){var n=e(this);if(n.val()===r){var i=n.parents(".js-quizle-condition-item"),a=t({_changed:c},ge(i)),o=e(x(t(t({},a),{},{questions:d(i)})));i.replaceWith(o),H(o.find(".js-quizle-condition-item-question").val(a.target),a)}}))})),ze()}}function U(e){return e.map((function(e){var t=parseInt(e.id);return isNaN(t)?0:t})).reduce((function(e,t){return Math.max(e,t)}),0)}function F(){e('input[type="checkbox"][name="result-enabled"]').is(":checked")||e('input[type="checkbox"][name="contact-enabled"]').is(":checked")?L.removeWarning(P.requireResultsOrContacts):L.warning(P.requireResultsOrContacts)}function V(){if(u===K()){var t=0,n=0;e(".js-quizle-question-item").each((function(i,a){var r=e(a),o=[];r.find(".js-quizle-answer-item").each((function(){var t=e(this),n=parseInt(t.find('input[data-name="value"]').val());o.push(isNaN(n)?0:n)})),o.length&&(r.find('input[data-name="required"]').is(":checked")&&(t+=Math.min.apply(Math,o)),r.find('input[data-name="is_multiple"]').is(":checked")?n+=o.reduce((function(e,t){return t+e}),0):n+=Math.max.apply(Math,o))})),e(".js-result-min-max-value .js-result-min-value").text(t),e(".js-result-min-max-value .js-result-max-value").text(n)}}function B(t,n){var i=e('input[type="checkbox"][name="contact-enabled"]'),a=i.parent(),o=i.data("prev_state_checked");t!==n&&(n===r&&(i.removeData("prev_state_checked"),a.find('input[type="hidden"]').val(0),i.attr("disabled",!1),a.removeClass("disabled"),void 0!==o&&i.prop("checked",o)),t===r&&(i.data("prev_state_checked",i.is(":checked")?1:0),i.prop("checked",!0),i.attr("disabled",!0),a.find('input[type="hidden"]').val(1),a.addClass("disabled")),F())}function Y(t,n){t.find("option").remove(),t.append(e("<option>").attr("value","").text(t.data("empty_opt_text")));var i=[];N.forEach((function(n){i.push(n.value),t.append(e("<option>").attr("value",n.value).text(n.label))})),t.val(i.includes(n)?n:"")}function K(){return T.val()}function X(e){return e===u}function Z(e){return e===o}function ee(e){switch(e){case"text":case"textarea":return!1;default:return!0}}function te(e){if(u===K())switch(e){case"text":case"textarea":return!1;default:return!0}return!1}function ne(e){switch(e){case"text":case"textarea":return!1;default:return!0}}function ie(e){return e===u}function ae(e,t){void 0===t&&(t=te(e.find('select[data-name="type"]').val())),t?e.find(".js-question-right-answer-description").show():e.find(".js-question-right-answer-description").hide()}function re(e,t){void 0===t&&(t=ne(e.find('select[data-name="type"]').val())),t?e.find(".js-question-columns").show():e.find(".js-question-columns").hide()}function oe(e,t){void 0===t&&(t=ee(e.find('select[data-name="type"]').val())),t?(e.find(".quizle-answers").show(),e.find(".js-add-quizle-answer").show(),e.find(".js-quizle-is-multiple-checkbox").show()):(e.find(".quizle-answers").hide(),e.find(".js-add-quizle-answer").hide(),e.find(".js-quizle-is-multiple-checkbox").hide())}function ue(e){switch(e){case"image_horizontal":case"image_vertical":return!0;default:return!1}}function se(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t.find(".js-quizle-question-media");return e(_({size:"large",name:"media",media:n})).appendTo(i),t}function le(t,n){if(ue(n)){var i=t.find(".js-quizle-answer-image");e(y({name:"image",url:i.attr("data-image")})).appendTo(i)}return t}function ce(e,t,n){void 0===t&&(t=K()),e.find(".js-quizle-answer-score-number, .js-quizle-answer-score-select").hide();var i="";return X(t)?i=e.find(".js-quizle-answer-score-number").show().val():Z(t)&&(i=e.find(".js-quizle-answer-score-select").show().val()),void 0!==n&&n&&e.find('input[data-name="value"]').val(i),e}function de(t,n){return n=void 0===n?{image:""}:n,t.find(".js-image-upload-placeholder").replaceWith(e(y({name:"image",url:n.image,size:"medium"}))),t}function pe(e,t){return void 0===t&&(t=K()),ie(t)?e.find(".js-result-min-max-value").show():e.find(".js-result-min-max-value").hide(),e}function fe(e){return e.find(".js-quizle-answers-container").sortable({axis:"y",handle:".quizle-answer__move",update:me}),e}function he(e,t){return setTimeout((function(){e.addClass(t)}),50),setTimeout((function(){e.removeClass(t)}),450),e}function ve(e,t){t=void 0===t?200:t,clearTimeout(a),a=setTimeout(e,t)}function me(){clearTimeout(n),e("#publish").attr("disabled",!0),n=setTimeout((function(){ze(),e("#publish").attr("disabled",!1)}),200)}function qe(){clearTimeout(i),e("#publish").attr("disabled",!0),i=setTimeout((function(){je(),e("#publish").attr("disabled",!1)}),50)}function ze(){var t=[],n=!1;k.find(".js-quizle-question-item").each((function(){var i=e(this),a={answers:[],conditions:[]};i.find(".js-quizle-answer-item").each((function(){var t,n;a.answers.push((t=e(this),n={},t.find("input, textarea, select").not(":button, :submit, :reset").each((function(){var t=e(this),i=c(t);void 0!==i&&i.length&&(n[i]=l(t),t.data("_exclude_from_questions_json",1))})),n))})),i.find(".js-quizle-question-conditions").each((function(){var t,i;(t=e(this),i=[],t.each((function(){var t=e(this),n={type:t.find('input[data-name="type"]').data("_exclude_from_questions_json",1).val(),relation:t.find('input[data-name="relation"]').data("_exclude_from_questions_json",1).val()},a=n.type,r=void 0===a?"show":a,o=n.relation,u={type:r,relation:void 0===o?"AND":o,conditions:[]};t.find(".js-quizle-condition-item").each((function(){u.conditions.push(ge(e(this)))})),i.push(u)})),i).forEach((function(e){e.conditions.length&&(a.conditions.push(e),n=!0)}))})),i.find("input, textarea, select").not(":button, :submit, :reset").filter((function(){return!e(this).data("_exclude_from_questions_json")})).each((function(){var t=e(this),n=c(t);void 0!==n&&n.length&&(a[n]=l(t))})),ee(a.type)||(a.answers=[]),te(a.type)||(a.right_answer_description=""),t.push(a)})),G(n),E.val(JSON.stringify(t)),console.log("questions",t)}function ge(t){var n={};return t.find("input,textarea,select").not(":button, :submit, :reset").each((function(){var t=e(this),i=c(t);if(t.data("_exclude_from_questions_json",1),void 0!==i&&i.length){var a=l(t);if("compare-option-"===i.substring(0,15)){var r=n.compareOptions,o=void 0===r?{}:r;o[i.substring(15)]=a,n.compareOptions=o}else n[i]="value"===i?Array.isArray(a)?a:[a]:a}})),n}function je(){var t=[];O.find(".js-quizle-result-item").each((function(){var n={};e(this).find("input, textarea, select").not(":button, :submit, :reset").each((function(){var t=e(this),i=c(t);void 0!==i&&i.length&&(n[i]=l(t))})),t.push(n)})),I.val(JSON.stringify(t)),document.dispatchEvent(new CustomEvent("quizle_save_results",{detail:t})),console.log("results",t)}e(document).on("focus",".js-quizle-question-type",(function(t){M=e(t.currentTarget).val()})).on("change",".js-quizle-question-type",(function(t){var n=e(t.currentTarget);n.blur(),W(n.parents(".js-quizle-question-item"),"changed_question_type",{curValue:n.val(),prevValue:M})})),e(document).on("change",".js-quizle-condition-item input, .js-quizle-condition-item select, .js-quizle-condition-item textarea",(function(t){e(t.currentTarget).parents(".js-quizle-condition-item").find(".js-quizle-condition-item-changed").hide()})),e(document).on("keyup",'.js-quizle-answer-item input[data-name="name"]',(function(t){clearTimeout(R);var n=e(t.currentTarget).parents(".js-quizle-question-item");R=setTimeout((function(){W(n,"changed_answer",{markChanged:0})}),150)})),e(document).on("keyup",'.js-quizle-question-item input[data-name="title"]',(function(t){clearTimeout(R);var n=e(t.currentTarget).parents(".js-quizle-question-item");R=setTimeout((function(){W(n,"changed_question",{markChanged:0})}),150)})),k.sortable({axis:"y",handle:".quizle-question-header__move",update:function(){ze(),e(".js-quizle-question--add-conditions").show().first().hide(),e(".js-quizle-question-item").each((function(){var t=e(this),n=t.find(".js-quizle-condition-item");if(n.length){var i=$(t.find(".js-quizle-question-id").val()).map((function(e){return e.question_id}));n.each((function(){var t=e(this),n=t.find(".js-quizle-condition-item-question").val();n&&function(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?(e.find(".quizle-question-condition-item__overlay").hide(),e.find('input[data-name="disabled"]').val(0)):(e.find('input[data-name="disabled"]').val(1),e.find(".quizle-question-condition-item__overlay").show())}(t,!i.includes(n))}))}})),ze()}}),O.sortable({axis:"y",handle:".quizle-result-header__move",update:je}),e(document).on("quizle_save_results",(function(t){C=U(t.detail),N=t.detail.map((function(e){return{label:e.title,value:e.id}})),e(".js-quizle-answer-item").each((function(){var t=e(this),n=t.find('input[data-name="value"]'),i=t.find(".js-quizle-answer-score-select"),a=i.val();Y(i,a),i.is(":visible")&&n.val(i.val())}))}))}))}));